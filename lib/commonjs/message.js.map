{"version":3,"sources":["message.ts"],"names":["isTextMessage","message","body","undefined","isFileMessage","file","isUserMessage","user","isSystemMessage","GetMessagesSucceededResult","ChatKittySucceededResult","constructor","paginator","GetLastReadMessageResult","ReadMessageSucceededResult","EditedMessageSucceededResult","DeleteMessageForMeSucceededResult","DeleteMessageSucceededResult","SentTextMessageResult","SentFileMessageResult","sentTextMessage","result","type","sentFileMessage","GetMessageChannelSucceededResult","channel","GetMessageParentSucceededResult","MessageNotAReplyError","ChatKittyError","messageModel","id"],"mappings":"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","sourcesContent":["import { Channel } from './channel';\nimport { ChatKittyError } from './error';\nimport {\n  ChatKittyFile,\n  ChatKittyUploadProgressListener,\n  CreateChatKittyFileProperties,\n} from './file';\nimport { ChatKittyPaginator } from './pagination';\nimport { ReactionSummary } from './reaction';\nimport {\n  ChatKittyFailedResult,\n  ChatKittyResult,\n  ChatKittySucceededResult\n} from './result';\nimport { Thread } from './thread';\nimport { User } from './user';\n\nexport type Message = SystemMessage | UserMessage;\n\nexport type SystemMessage = TextSystemMessage | FileSystemMessage;\n\nexport type UserMessage = TextUserMessage | FileUserMessage;\n\nexport type TextMessage = TextSystemMessage | TextUserMessage;\n\nexport type FileMessage = FileSystemMessage | FileUserMessage;\n\nexport interface BaseMessage {\n  id: number;\n  type: string;\n  channelId: number;\n  createdTime: string;\n  groupTag?: string;\n  reactionsSummary?: ReactionSummary;\n  repliesCount?: number;\n  properties: unknown;\n  _relays: MessageRelays;\n  _actions: MessageActions;\n  _streams: MessageStreams;\n}\n\nexport type BaseTextMessage = BaseMessage & {\n  body: string;\n  links: MessageLink[];\n  mentions?: MessageMention[];\n};\n\nexport type BaseFileMessage = BaseMessage & {\n  file: ChatKittyFile;\n};\n\nexport type BaseUserMessage = BaseMessage & {\n  user: User;\n};\n\nexport type TextSystemMessage = BaseTextMessage;\n\nexport type FileSystemMessage = BaseFileMessage;\n\nexport type TextUserMessage = BaseTextMessage & BaseUserMessage;\n\nexport type FileUserMessage = BaseFileMessage & BaseUserMessage;\n\nexport declare class MessageLink {\n  source: string;\n  startPosition: number;\n  endPosition: number;\n  preview?: MessageLinkPreview;\n}\n\nexport declare class MessageLinkPreview {\n  url: string;\n  title: string;\n  image: MessageLinkPreviewImage;\n  description?: string;\n  siteName?: string;\n}\n\nexport declare class MessageLinkPreviewImage {\n  source: string;\n}\n\nexport type MessageMention = ChannelMessageMention | UserMessageMention;\n\nexport interface BaseMessageMention {\n  type: string;\n  tag: string;\n  startPosition: number;\n  endPosition: number;\n}\n\nexport type ChannelMessageMention = BaseMessageMention & {\n  channel: Channel;\n};\n\nexport type UserMessageMention = BaseMessageMention & {\n  user: User;\n};\n\nexport declare class MessageRelays {\n  self: string;\n  channel: string;\n  parent?: string;\n  readReceipts: string;\n  repliesCount: string;\n  replies: string;\n  reactions: string;\n}\n\nexport declare class MessageActions {\n  read: string;\n  reply: string;\n  deleteForMe: string;\n  delete: string;\n  react: string;\n  edit: string;\n  removeReaction: string;\n}\n\nexport declare class MessageStreams {\n  replies: string;\n}\n\nexport function isTextMessage(message: Message): message is TextMessage {\n  return (message as TextMessage).body !== undefined;\n}\n\nexport function isFileMessage(message: Message): message is FileMessage {\n  return (message as FileMessage).file !== undefined;\n}\n\nexport function isUserMessage(message: Message): message is UserMessage {\n  return (message as UserMessage).user !== undefined;\n}\n\nexport function isSystemMessage(message: Message): message is SystemMessage {\n  return (message as UserMessage).user === undefined;\n}\n\nexport type GetMessagesRequest =\n  | GetChannelMessagesRequest\n  | GetMessageRepliesRequest;\n\nexport declare class GetChannelMessagesRequest {\n  channel: Channel;\n  filter?: GetChannelMessagesFilter;\n}\n\nexport declare class GetMessageRepliesRequest {\n  message: Message;\n}\n\nexport declare class GetChannelMessagesFilter {\n  mainThread: boolean;\n}\n\nexport declare class GetLastReadMessageRequest {\n  channel: Channel;\n  username: string;\n}\n\nexport type GetMessagesResult =\n  | ChatKittyResult<GetMessagesSucceededResult>\n  | GetMessagesSucceededResult\n  | ChatKittyFailedResult;\n\nexport class GetMessagesSucceededResult extends ChatKittySucceededResult {\n  constructor(public paginator: ChatKittyPaginator<Message>) {\n    super();\n  }\n}\n\nexport class GetLastReadMessageResult extends ChatKittySucceededResult {\n  constructor(public message?: Message) {\n    super();\n  }\n}\n\nexport declare class ReadMessageRequest {\n  message: Message;\n}\n\nexport type ReadMessageResult =\n  | ChatKittyResult<ReadMessageSucceededResult>\n  | ReadMessageSucceededResult\n  | ChatKittyFailedResult;\n\nexport class ReadMessageSucceededResult extends ChatKittySucceededResult {\n  constructor(public message: Message) {\n    super();\n  }\n}\n\nexport declare class EditMessageRequest {\n  message: Message;\n  body: string;\n}\n\nexport type EditMessageResult =\n  | ChatKittyResult<EditedMessageSucceededResult>\n  | EditedMessageSucceededResult\n  | ChatKittyFailedResult;\n\nexport class EditedMessageSucceededResult extends ChatKittySucceededResult {\n  constructor(public message: Message) {\n    super();\n  }\n}\n\nexport declare class DeleteMessageForMeRequest {\n  message: Message;\n}\n\nexport type DeleteMessageForMeResult =\n  | ChatKittyResult<DeleteMessageForMeSucceededResult>\n  | DeleteMessageForMeSucceededResult\n  | ChatKittyFailedResult;\n\nexport class DeleteMessageForMeSucceededResult extends ChatKittySucceededResult {\n  constructor(public message: Message) {\n    super();\n  }\n}\n\nexport declare class DeleteMessageRequest {\n  message: Message;\n}\n\nexport type DeleteMessageResult =\n  | ChatKittyResult<DeleteMessageSucceededResult>\n  | DeleteMessageSucceededResult\n  | ChatKittyFailedResult;\n\nexport class DeleteMessageSucceededResult extends ChatKittySucceededResult {\n  constructor(public message: Message) {\n    super();\n  }\n}\n\nexport type SendMessageRequest =\n  | SendTextMessageRequest\n  | SendFileMessageRequest;\n\nexport type SendChannelMessageRequest = {\n  channel: Channel;\n};\n\nexport type SendMessageReplyRequest = {\n  message: Message;\n};\n\nexport type SendThreadMessageRequest = {\n  thread: Thread;\n};\n\nexport type SendTextMessageRequest = (\n  | SendChannelMessageRequest\n  | SendMessageReplyRequest\n  | SendThreadMessageRequest\n) & {\n  body: string;\n  groupTag?: string;\n  properties?: unknown;\n};\n\nexport type SendFileMessageRequest = (\n  | SendChannelMessageRequest\n  | SendMessageReplyRequest\n  | SendThreadMessageRequest\n) & {\n  file: CreateChatKittyFileProperties;\n  groupTag?: string;\n  properties?: unknown;\n  progressListener?: ChatKittyUploadProgressListener;\n};\n\nexport type SendMessageResult =\n  | ChatKittyResult<SentMessageResult>\n  | SentMessageResult\n  | ChatKittyFailedResult;\n\nexport type SentMessageResult =\n  | ChatKittyResult<SentTextMessageResult>\n  | SentTextMessageResult\n  | SentFileMessageResult;\n\nexport class SentTextMessageResult extends ChatKittySucceededResult {\n  constructor(public message: TextUserMessage) {\n    super();\n  }\n}\n\nexport class SentFileMessageResult extends ChatKittySucceededResult {\n  constructor(public message: FileUserMessage) {\n    super();\n  }\n}\n\nexport function sentTextMessage(\n  result: SentMessageResult\n): result is SentTextMessageResult {\n  const message = (result as SentTextMessageResult).message;\n\n  return message !== undefined && message.type === 'TEXT';\n}\n\nexport function sentFileMessage(\n  result: SentMessageResult\n): result is SentFileMessageResult {\n  const message = (result as SentFileMessageResult).message;\n\n  return message !== undefined && message.type === 'FILE';\n}\n\nexport declare class GetUnreadMessagesCountRequest {\n  channel: Channel;\n}\n\nexport declare class GetMessageRepliesCountRequest {\n  message: Message;\n}\n\nexport declare class GetMessageChannelRequest {\n  message: Message;\n}\n\nexport type GetMessageChannelResult =\n  | ChatKittyResult<GetMessageChannelSucceededResult>\n  | GetMessageChannelSucceededResult\n  | ChatKittyFailedResult;\n\nexport class GetMessageChannelSucceededResult extends ChatKittySucceededResult {\n  constructor(public channel: Channel) {\n    super();\n  }\n}\n\nexport declare class GetMessageParentRequest {\n  message: Message;\n}\n\nexport type GetMessageParentResult =\n  | ChatKittyResult<GetMessageParentSucceededResult>\n  | GetMessageParentSucceededResult\n  | ChatKittyFailedResult;\n\nexport class GetMessageParentSucceededResult extends ChatKittySucceededResult {\n  constructor(public message: Message) {\n    super();\n  }\n}\n\nexport class MessageNotAReplyError extends ChatKittyError {\n  constructor(public messageModel: Message) {\n    super(\n      'MessageNotAReplyError',\n      `Message ${messageModel.id} is not a reply.`\n    );\n  }\n}\n"]}